<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <div #hamburger class="hamburger" (click)="toggleSidebar()">
        <div class="hamburger__bar hamburger__bar-1"></div>
        <div class="hamburger__bar hamburger__bar-2"></div>
        <div class="hamburger__bar hamburger__bar-3"></div>
      </div>
    </ion-buttons>
    <ion-title>Mapa Szk贸 Niepublicznych</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div class="header">
    <ion-searchbar #nameInput placeholder="Wyszukaj..." debounce="700"
      (ionChange)="filterSchoolsEvent($event)"></ion-searchbar>

    <div #dropdownButton class="headerArrow arrow" [ngClass]="{'arrow--down': !showDropdown, 'arrow--up': showDropdown}"
      (click)="toggleDropdown()"></div>

    <div *ngIf="showDropdown" class="dropdown-content">
      <p class="dropdown-content__title">Filtry</p>

      <div class="voivodeship__container">
        <label for="select-voivodeship">Wojew贸dztwo:</label>
        <ion-select #voivodeship [(ngModel)]="selectedVoivodeship" (ngModelChange)="filterSchools()">
          <ion-select-option *ngFor="let voivode of voivodeships" [value]="voivode.value">{{ voivode.label
            }}</ion-select-option>
        </ion-select>
      </div>

      <div class="school-type__container">
        <ion-item *ngFor="let type of schoolTypes">
          <ion-checkbox slot="start" [(ngModel)]="selectedSchoolTypes[type.value]"
            (ionChange)="filterSchools()"></ion-checkbox>
          <ion-label>{{ type.label }}</ion-label>
        </ion-item>
      </div>
    </div>
  </div>

  <ion-content>
    <div *ngFor="let school of newSchools">
      <ion-card (click)="toggleDetails(school)">
        <ion-card-header>
          <ion-card-title>{{ school.nazwa }}</ion-card-title>
        </ion-card-header>
        <ion-card-content>
          <p>{{ school.miejscowosc }}, {{ school.gmina }}</p>
          <p>{{ school.kategoriaUczniow }} - {{ school.liczbaUczniow }} students</p>
        </ion-card-content>
      </ion-card>
      
      <!-- Expanded Details Section -->
      <div *ngIf="school.isExpanded" class="school-details">
        <ion-card>
          <ion-card-content>
            <div class="comparison-table">
              <div class="comparison-header-row">
                <div class="comparison-inv-header">
                </div>
                <div class="comparison-new-header">
                  <h3> Nowa Szkoa</h3>
                </div>
                <div class="comparison-old-header">
                  <h3> Stara Szkoa</h3>
                </div>
              </div>
  
              <!-- Comparison Rows -->
              <div class="comparison-row">
                <div class="comparison-label"><strong>Dyrektor:</strong></div>
                <div class="comparison-new" [ngClass]="compareValues(school.dyrektor, school.matchedOldSchool?.dyrektor)">
                  {{ school.dyrektor }}
                </div>
                <div class="comparison-old" [ngClass]="compareValues(school.matchedOldSchool?.dyrektor, school.dyrektor)">
                  {{ school.matchedOldSchool?.dyrektor || 'N/A' }}
                </div>
              </div>
              
              <div class="comparison-row">
                <div class="comparison-label"><strong>Email:</strong></div>
                <div class="comparison-new" [ngClass]="compareValues(school.email, school.matchedOldSchool?.email)">
                  {{ school.email }}
                </div>
                <div class="comparison-old" [ngClass]="compareValues(school.matchedOldSchool?.email, school.email)">
                  {{ school.matchedOldSchool?.email || 'N/A' }}
                </div>
              </div>
              
              <div class="comparison-row">
                <div class="comparison-label"><strong>Jzyki:</strong></div>
                <div class="comparison-new" [ngClass]="compareValues(school.jezykiNauczane?.join(', '), school.matchedOldSchool?.jezykiNauczane?.join(', '))">
                  {{ school.jezykiNauczane?.join(', ') }}
                </div>
                <div class="comparison-old" [ngClass]="compareValues(school.matchedOldSchool?.jezykiNauczane?.join(', '), school.jezykiNauczane?.join(', '))">
                  {{ school.matchedOldSchool?.jezykiNauczane?.join(', ') || 'N/A' }}
                </div>
              </div>
              
              <div class="comparison-row">
                <div class="comparison-label"><strong>Szeroko geograficzna:</strong></div>
                <div class="comparison-new" [ngClass]="compareValues(school.latitude, school.matchedOldSchool?.latitude)">
                  {{ school.latitude }}
                </div>
                <div class="comparison-old" [ngClass]="compareValues(school.matchedOldSchool?.latitude, school.latitude)">
                  {{ school.matchedOldSchool?.latitude || 'N/A' }}
                </div>
              </div>
              
              <div class="comparison-row">
                <div class="comparison-label"><strong>Dugo geograficzna:</strong></div>
                <div class="comparison-new" [ngClass]="compareValues(school.longitude, school.matchedOldSchool?.longitude)">
                  {{ school.longitude }}
                </div>
                <div class="comparison-old" [ngClass]="compareValues(school.matchedOldSchool?.longitude, school.longitude)">
                  {{ school.matchedOldSchool?.longitude || 'N/A' }}
                </div>
              </div>
              
      
              <!-- Additional Fields -->
              <div class="comparison-row">
                <div class="comparison-label"><strong>Rspo Numer:</strong></div>
                <div class="comparison-new" [ngClass]="compareValues(school.rspoNumer, school.matchedOldSchool?.rspoNumer)">
                  {{ school.rspoNumer || 'N/A' }}
                </div>
                <div class="comparison-old" [ngClass]="compareValues(school.matchedOldSchool?.rspoNumer, school.rspoNumer)">
                  {{ school.matchedOldSchool?.rspoNumer || 'N/A' }}
                </div>
              </div>
              
              <div class="comparison-row">
                <div class="comparison-label"><strong>Typ:</strong></div>
                <div class="comparison-new" [ngClass]="compareValues(school.typ, school.matchedOldSchool?.typ)">
                  {{ school.typ || 'N/A' }}
                </div>
                <div class="comparison-old" [ngClass]="compareValues(school.matchedOldSchool?.typ, school.typ)">
                  {{ school.matchedOldSchool?.typ || 'N/A' }}
                </div>
              </div>
              
              <div class="comparison-row">
                <div class="comparison-label"><strong>Miejscowo:</strong></div>
                <div class="comparison-new" [ngClass]="compareValues(school.miejscowosc, school.matchedOldSchool?.miejscowosc)">
                  {{ school.miejscowosc || 'N/A' }}
                </div>
                <div class="comparison-old" [ngClass]="compareValues(school.matchedOldSchool?.miejscowosc, school.miejscowosc)">
                  {{ school.matchedOldSchool?.miejscowosc || 'N/A' }}
                </div>
              </div>
              
              <div class="comparison-row">
                <div class="comparison-label"><strong>Wojew贸dztwo:</strong></div>
                <div class="comparison-new" [ngClass]="compareValues(school.wojewodztwo, school.matchedOldSchool?.wojewodztwo)">
                  {{ school.wojewodztwo || 'N/A' }}
                </div>
                <div class="comparison-old" [ngClass]="compareValues(school.matchedOldSchool?.wojewodztwo, school.wojewodztwo)">
                  {{ school.matchedOldSchool?.wojewodztwo || 'N/A' }}
                </div>
              </div>
              
              <div class="comparison-row">
                <div class="comparison-label"><strong>Kod Pocztowy:</strong></div>
                <div class="comparison-new" [ngClass]="compareValues(school.kodPocztowy, school.matchedOldSchool?.kodPocztowy)">
                  {{ school.kodPocztowy || 'N/A' }}
                </div>
                <div class="comparison-old" [ngClass]="compareValues(school.matchedOldSchool?.kodPocztowy, school.kodPocztowy)">
                  {{ school.matchedOldSchool?.kodPocztowy || 'N/A' }}
                </div>
              </div>
              
              <div class="comparison-row">
                <div class="comparison-label"><strong>Numer Budynku:</strong></div>
                <div class="comparison-new" [ngClass]="compareValues(school.numerBudynku, school.matchedOldSchool?.numerBudynku)">
                  {{ school.numerBudynku || 'N/A' }}
                </div>
                <div class="comparison-old" [ngClass]="compareValues(school.matchedOldSchool?.numerBudynku, school.numerBudynku)">
                  {{ school.matchedOldSchool?.numerBudynku || 'N/A' }}
                </div>
              </div>
              
              <div class="comparison-row">
                <div class="comparison-label"><strong>Ulica:</strong></div>
                <div class="comparison-new" [ngClass]="compareValues(school.ulica, school.matchedOldSchool?.ulica)">
                  {{ school.ulica || 'N/A' }}
                </div>
                <div class="comparison-old" [ngClass]="compareValues(school.matchedOldSchool?.ulica, school.ulica)">
                  {{ school.matchedOldSchool?.ulica || 'N/A' }}
                </div>
              </div>
              
              <div class="comparison-row">
                <div class="comparison-label"><strong>Telefon:</strong></div>
                <div class="comparison-new" [ngClass]="compareValues(school.telefon, school.matchedOldSchool?.telefon)">
                  {{ school.telefon || 'N/A' }}
                </div>
                <div class="comparison-old" [ngClass]="compareValues(school.matchedOldSchool?.telefon, school.telefon)">
                  {{ school.matchedOldSchool?.telefon || 'N/A' }}
                </div>
              </div>
              
              <div class="comparison-row">
                <div class="comparison-label"><strong>Status Publicznoci:</strong></div>
                <div class="comparison-new" [ngClass]="compareValues(school.statusPublicznosc, school.matchedOldSchool?.statusPublicznosc)">
                  {{ school.statusPublicznosc || 'N/A' }}
                </div>
                <div class="comparison-old" [ngClass]="compareValues(school.matchedOldSchool?.statusPublicznosc, school.statusPublicznosc)">
                  {{ school.matchedOldSchool?.statusPublicznosc || 'N/A' }}
                </div>
              </div>
              
              <div class="comparison-row">
                <div class="comparison-label"><strong>Strona Internetowa:</strong></div>
                <div class="comparison-new" [ngClass]="compareValues(school.stronaInternetowa, school.matchedOldSchool?.stronaInternetowa)">
                  {{ school.stronaInternetowa || 'N/A' }}
                </div>
                <div class="comparison-old" [ngClass]="compareValues(school.matchedOldSchool?.stronaInternetowa, school.stronaInternetowa)">
                  {{ school.matchedOldSchool?.stronaInternetowa || 'N/A' }}
                </div>
              </div>
              
              <div class="comparison-row">
                <div class="comparison-label"><strong>NIP:</strong></div>
                <div class="comparison-new" [ngClass]="compareValues(school.nipPodmiotu, school.matchedOldSchool?.nipPodmiotu)">
                  {{ school.nipPodmiotu || 'N/A' }}
                </div>
                <div class="comparison-old" [ngClass]="compareValues(school.matchedOldSchool?.nipPodmiotu, school.nipPodmiotu)">
                  {{ school.matchedOldSchool?.nipPodmiotu || 'N/A' }}
                </div>
              </div>
              
              <div class="comparison-row">
                <div class="comparison-label"><strong>REGON:</strong></div>
                <div class="comparison-new" [ngClass]="compareValues(school.regonPodmiotu, school.matchedOldSchool?.regonPodmiotu)">
                  {{ school.regonPodmiotu || 'N/A' }}
                </div>
                <div class="comparison-old" [ngClass]="compareValues(school.matchedOldSchool?.regonPodmiotu, school.regonPodmiotu)">
                  {{ school.matchedOldSchool?.regonPodmiotu || 'N/A' }}
                </div>
              </div>
              
              <div class="comparison-row">
                <div class="comparison-label"><strong>Data Zao偶enia:</strong></div>
                <div class="comparison-new" [ngClass]="compareValues(school.dataZalozenia, school.matchedOldSchool?.dataZalozenia)">
                  {{ school.dataZalozenia || 'N/A' }}
                </div>
                <div class="comparison-old" [ngClass]="compareValues(school.matchedOldSchool?.dataZalozenia, school.dataZalozenia)">
                  {{ school.matchedOldSchool?.dataZalozenia || 'N/A' }}
                </div>
              </div>
              
              <div class="comparison-row">
                <div class="comparison-label"><strong>Liczba Uczni贸w:</strong></div>
                <div class="comparison-new" [ngClass]="compareValues(school.liczbaUczniow, school.matchedOldSchool?.liczbaUczniow)">
                  {{ school.liczbaUczniow || 'N/A' }}
                </div>
                <div class="comparison-old" [ngClass]="compareValues(school.matchedOldSchool?.liczbaUczniow, school.liczbaUczniow)">
                  {{ school.matchedOldSchool?.liczbaUczniow || 'N/A' }}
                </div>
              </div>
              
              <div class="comparison-row">
                <div class="comparison-label"><strong>Kategoria Uczni贸w:</strong></div>
                <div class="comparison-new" [ngClass]="compareValues(school.kategoriaUczniow, school.matchedOldSchool?.kategoriaUczniow)">
                  {{ school.kategoriaUczniow || 'N/A' }}
                </div>
                <div class="comparison-old" [ngClass]="compareValues(school.matchedOldSchool?.kategoriaUczniow, school.kategoriaUczniow)">
                  {{ school.matchedOldSchool?.kategoriaUczniow || 'N/A' }}
                </div>
              </div>
              
              <div class="comparison-row">
                <div class="comparison-label"><strong>Specyfika Plac贸wki:</strong></div>
                <div class="comparison-new" [ngClass]="compareValues(school.specyfikaPlacowki, school.matchedOldSchool?.specyfikaPlacowki)">
                  {{ school.specyfikaPlacowki || 'N/A' }}
                </div>
                <div class="comparison-old" [ngClass]="compareValues(school.matchedOldSchool?.specyfikaPlacowki, school.specyfikaPlacowki)">
                  {{ school.matchedOldSchool?.specyfikaPlacowki || 'N/A' }}
                </div>
              </div>
              
              <div class="comparison-row">
                <div class="comparison-label"><strong>Gmina:</strong></div>
                <div class="comparison-new" [ngClass]="compareValues(school.gmina, school.matchedOldSchool?.gmina)">
                  {{ school.gmina || 'N/A' }}
                </div>
                <div class="comparison-old" [ngClass]="compareValues(school.matchedOldSchool?.gmina, school.gmina)">
                  {{ school.matchedOldSchool?.gmina || 'N/A' }}
                </div>
              </div>
              
              <div class="comparison-row">
                <div class="comparison-label"><strong>Powiat:</strong></div>
                <div class="comparison-new" [ngClass]="compareValues(school.powiat, school.matchedOldSchool?.powiat)">
                  {{ school.powiat || 'N/A' }}
                </div>
                <div class="comparison-old" [ngClass]="compareValues(school.matchedOldSchool?.powiat, school.powiat)">
                  {{ school.matchedOldSchool?.powiat || 'N/A' }}
                </div>
              </div>
              
            </div>
          </ion-card-content>
        </ion-card>
      </div>
    </div>
  </ion-content>
  
  
  
  

  <ion-menu side="start" contentId="map-content">
    <ion-header>
      <ion-toolbar>
        <ion-title>Dodatkowe informacje</ion-title>
      </ion-toolbar>
    </ion-header>

    <ion-content>
      <ion-segment [(ngModel)]="activeTab">
        <ion-segment-button value="general">Dane og贸lne</ion-segment-button>
        <ion-segment-button value="detailed">Dane szczeg贸owe</ion-segment-button>
      </ion-segment>

      <div *ngIf="activeTab === 'general'" class="sidebar__content">
        <div class="sidebar__address-info">
        </div>
      </div>

      <div *ngIf="activeTab === 'detailed'" class="sidebar__content">
        <div class="sidebar__detailed-info">
        </div>
      </div>
    </ion-content>
  </ion-menu>

  <div id="map-content">
    <div #map class="map"></div>
  </div>
</ion-content>
